<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0-internal) on Mon Jan 03 15:44:21 EST 2022 -->
<title>KcopSingleRowAvroAuditHeadersIntegrated (IBM InfoSphere Data Replication Change Data Capture API Documentation)</title>
<meta name="date" content="2022-01-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KcopSingleRowAvroAuditHeadersIntegrated (IBM InfoSphere Data Replication Change Data Capture API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div role="navigation" title ="TOP_Navigation" aria-label ="Top Navigation Bar"/>
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KcopSingleRowAvroAuditHeadersIntegrated.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopMultiRowAvroLiveAuditIntegrated.html" title="class in com.datamirror.ts.target.publication.userexit.sample.kafka"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditIntegrated.html" title="class in com.datamirror.ts.target.publication.userexit.sample.kafka"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html" target="_top">Frames</a></li>
<li><a href="KcopSingleRowAvroAuditHeadersIntegrated.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div role="main" title ="KcopSingleRowAvroAuditHeadersIntegrated" aria-labelledby ="Header1"/>
<div class="header">
<div class="subTitle">com.datamirror.ts.target.publication.userexit.sample.kafka</div>
<h2 title="Class KcopSingleRowAvroAuditHeadersIntegrated" class="title" id="Header1">Class KcopSingleRowAvroAuditHeadersIntegrated</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractKcop</li>
<li>
<ul class="inheritance">
<li>com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractAvroKcop</li>
<li>
<ul class="inheritance">
<li>com.datamirror.ts.target.publication.userexit.sample.kafka.KcopSingleRowAvroAuditHeadersIntegrated</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaCustomOperationProcessorIF</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditIntegrated.html" title="class in com.datamirror.ts.target.publication.userexit.sample.kafka">KcopSingleRowAvroAuditIntegrated</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">KcopSingleRowAvroAuditHeadersIntegrated</span>
extends com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractAvroKcop</pre>
<div class="block"><p>This sample produces an audit record in avro format. It uses journal control fields available in
  the Kcop API and uses an avro serializer to produce a generic avro record.  It places both the before
  and after images, where appropriate, on a single row.  The before and after images may either exist or be a null
  instead depending on the operation.</p>
  
  <br> In MC the user exits class name is: com.datamirror.ts.target.publication.userexit.sample.kafka.KcopSingleRowAvroAuditHeadersIntegrated
  <br> In MC the user exit parameter may either start with "-file:" to indicate property file, or simply be a schema registry url.
  <br> eg. -file:/home/nz/CDC/KCOP.properties
  <p>
  The input parameter can be the schema registry url, or a properties file. The properties file
  can be specified by using -file:[properties_file_path] in the user exit parameter.</p>
  
  <p>The properties file can define the following parameters:</p>
  
  schema.registry - the schema registry url
  <br>audit.jcfs - a comma-separated list of journal control field names to be added to each record
  <br>header.jcfs - a comma-separated list of jcfs to include in the header of the record.
  <br>header.columns - a comma-separated list of <source topic>.column to include in the header for operations related to the source topics.
  <br>                 Note that the value of a header is a byte array and .toString is used on the column value as the basis of providing those bytes.
  <br>                 Ensure that the column you select for the header returns something meaningful were .toString() to be called on the column value.
  <br>                           If a given column, identified to be a header, does not exist for the table mapping in question then nothing is added to the headers.
  <br>headers.include.schema - a boolean that if set to "true" will include the value schema of the producer record as a header.  The header key is "ValueRecordSchema"
  <br>header.prefix - a prefix that will be added in front of the key for all headers this KCOP produces
 
  <p>By default, the journal control fields that will be used are ENTTYP, TIMSTAMP, JOB, JOBUSER. See <code>JournalControlField</code>
  for the list of available journal control fields. To specify ENTTYP and CCID, create a properties file containing:</p>
  <p>
  schema.registry=https://[schema_registry_url]:[schema_registry_port]
  <br>audit.jcfs=ENTTYP,CCID </p>
  
  Additionally this KCOP allows the user to choose which topic a given source table's operations are to be
  written to at a source table granularity.</p>

  <p>To Explicitly map a given source to a given topic name use MAP_TABLE_ as a prefix to the default topic name.
  The following file example would map all tables to a default topic named DefaultTopicTest and 
  kafka1.kafka_multi_tab.sourcedb.shawnrr.tab2 to a topic named remappedTab2.</p>

  <br>$ cat kcopTopicMapping.properties 
  <br>schema.registry.url=http://localhost:8081
  <br>MAP_DEFAULT=DefaultTopicTest
  <br>MAP_TABLE_kafka1.kafka_multi_tab.sourcedb.shawnrr.tab2=remappedTab2

  <p>To map all source tables to a single topic use MAP_ALL rather than using MAP_ DEFAULT with no explicit mappings.
  Both would technically work, but MAP_ALL avoids an internal lookup for every call to createProducerRecords.</p>

  <br>[nz@shawnrrvm conf]$ cat kcopTopicMapping.properties 
  <br>schema.registry.url=http://localhost:8081
  <br>MAP_ALL=OneTopicToRuleThemAll

  <p> When combining multiple records from different source tables to the same topic, it may be wise to include a source
  table column in the mapping so you'll know which table the record consumed corresponded to. </p>
  
   <p>NOTE 1:  The createProducerRecords class is multi threaded and thread safe.  As multiple threads can execute create producer record any alterations to this 
   file must be multi-thread aware.    A means is provided so that each thread can store its own copy of non-theadsafe objects.  Please see how this is done below.</p>
    
  <p>NOTE 2:  The records returned by createProducerRecords are not deep copied, so each call to the method should
   generate new records and not attempt to keep references to old ones for reuse. This is already demonstrated in the KCOP.</p>
   
  <p>Note 3:  The KCOP is instantiated once per subscription which registers the KCOP.  This means if statics are made
   use of, they will potentially be shared across the instantiated KCOPs belonging to multiple actively replicating 
   subscriptions.</p>
   
   <p>NOTE 4:  A kafka key must be defined for the subscription.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#BEFORE_SCHEMA_PREFIX">BEFORE_SCHEMA_PREFIX</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#DEFAULT_AUDIT_COLUMNS">DEFAULT_AUDIT_COLUMNS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#FORCED_NULLABLE_LOB_COLUMNS">FORCED_NULLABLE_LOB_COLUMNS</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#KcopSingleRowAvroAuditHeadersIntegrated--">KcopSingleRowAvroAuditHeadersIntegrated</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#changeNameSpaceIfNecessary-org.apache.avro.Schema-">changeNameSpaceIfNecessary</a></span>(org.apache.avro.Schema&nbsp;beforeSchema)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>org.apache.kafka.clients.producer.ProducerRecord&lt;byte[],byte[]&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#createKafkaAuditAvroBinaryProducerRecord-org.apache.avro.generic.GenericRecord-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.sample.kafka.ThreadSpecificContext-">createKafkaAuditAvroBinaryProducerRecord</a></span>(org.apache.avro.generic.GenericRecord&nbsp;kafkaAvroValueAuditRecord,
                                        <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopReplicationCoordinator,
                                        <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn,
                                        com.datamirror.ts.target.publication.userexit.sample.kafka.ThreadSpecificContext&lt;com.datamirror.ts.target.publication.userexit.sample.kafka.AvroAuditKcopSpecificContext&gt;&nbsp;threadSpecificContext)</code>
<div class="block">Serialize the generic avro record using the Confluent serializer</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>org.apache.avro.generic.GenericData.Record</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#createKafkaAuditAvroRecord-org.apache.avro.Schema-org.apache.avro.generic.GenericRecord-org.apache.avro.Schema-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-">createKafkaAuditAvroRecord</a></span>(org.apache.avro.Schema&nbsp;beforeSchema,
                          org.apache.avro.generic.GenericRecord&nbsp;beforeRecord,
                          org.apache.avro.Schema&nbsp;kafkaAuditAvroSchema,
                          <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn)</code>
<div class="block">Creates a new Avro Generic Record that combines the original record for the source and 
 the selected journal control fields.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;org.apache.kafka.clients.producer.ProducerRecord&lt;byte[],byte[]&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#createProducerRecords-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">createProducerRecords</a></span>(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn,
                     <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)</code>
<div class="block">This method returns zero or more new Kafka ProducerRecord 's in response to an event on the source database described by the kafkaKcopOperationIn
 parameter.<BR><BR>
 
 This method can be called by multiple threads concurrently and thus events are potentially processed in a differing order than they occurred on the
 source database.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#finish-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">finish</a></span>(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)</code>
<div class="block">This method will be called during shutdown.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#generateAfterSchema-org.apache.avro.Schema-">generateAfterSchema</a></span>(org.apache.avro.Schema&nbsp;beforeSchema)</code>
<div class="block">Generate an after schema using the before Schema.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#generateBeforeSchema-org.apache.avro.Schema-">generateBeforeSchema</a></span>(org.apache.avro.Schema&nbsp;avroBaseSchema)</code>
<div class="block">Generate an before schema with nullable columns for LOB columns.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>org.apache.avro.Schema</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#generateKafkaAuditValueSchema-org.apache.avro.Schema-org.apache.avro.Schema-com.datamirror.ts.target.publication.userexit.ReplicationEventPublisherIF-">generateKafkaAuditValueSchema</a></span>(org.apache.avro.Schema&nbsp;avroValueSchemaIn,
                             org.apache.avro.Schema&nbsp;avroBeforeValueSchemaIn,
                             com.datamirror.ts.target.publication.userexit.ReplicationEventPublisherIF&nbsp;kafkaKcopCoordinator)</code>
<div class="block">Create a new schema for the audit record.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#init-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">init</a></span>(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)</code>
<div class="block">To be called once when subscription is started and before any createProducerRecords calls are made.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html#tracksJcfs--">tracksJcfs</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.datamirror.ts.target.publication.userexit.kafka.KafkaCustomOperationProcessorIF">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.datamirror.ts.target.publication.userexit.kafka.<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaCustomOperationProcessorIF</a></h3>
<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#createKafkaRecords-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">createKafkaRecords</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_AUDIT_COLUMNS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_AUDIT_COLUMNS</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_AUDIT_COLUMNS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../../constant-values.html#com.datamirror.ts.target.publication.userexit.sample.kafka.KcopSingleRowAvroAuditHeadersIntegrated.DEFAULT_AUDIT_COLUMNS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="FORCED_NULLABLE_LOB_COLUMNS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORCED_NULLABLE_LOB_COLUMNS</h4>
<pre>public static final&nbsp;java.lang.String FORCED_NULLABLE_LOB_COLUMNS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../../constant-values.html#com.datamirror.ts.target.publication.userexit.sample.kafka.KcopSingleRowAvroAuditHeadersIntegrated.FORCED_NULLABLE_LOB_COLUMNS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="BEFORE_SCHEMA_PREFIX">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BEFORE_SCHEMA_PREFIX</h4>
<pre>public static final&nbsp;java.lang.String BEFORE_SCHEMA_PREFIX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../../constant-values.html#com.datamirror.ts.target.publication.userexit.sample.kafka.KcopSingleRowAvroAuditHeadersIntegrated.BEFORE_SCHEMA_PREFIX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KcopSingleRowAvroAuditHeadersIntegrated--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KcopSingleRowAvroAuditHeadersIntegrated</h4>
<pre>public&nbsp;KcopSingleRowAvroAuditHeadersIntegrated()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)
          throws com.datamirror.ts.target.publication.userexit.UserExitException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#init-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">KafkaCustomOperationProcessorIF</a></code></span></div>
<div class="block">To be called once when subscription is started and before any createProducerRecords calls are made.  An implementer will typically call
 the subscribe method on the ReplicationEventPublisherIF during the init. <BR></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#init-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">init</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaCustomOperationProcessorIF</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>init</code>&nbsp;in class&nbsp;<code>com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractAvroKcop</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaKcopCoordinator</code> - - In general the kafkaKcopCoordinator should be thought of as an object which offers interaction with behaviors
  and information replication that have "replication scope" relevance. ie. that apply to the particular replication session as a whole.<Br>
  As per the above a user indicates to the KCOP framework which events they wish to handle by calling subscribeEvent method.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.datamirror.ts.target.publication.userexit.UserExitException</code> - - Users can optionally choose to throw an exception in response to initial criteria validation.</dd>
</dl>
</li>
</ul>
<a name="createProducerRecords-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createProducerRecords</h4>
<pre>public&nbsp;java.util.ArrayList&lt;org.apache.kafka.clients.producer.ProducerRecord&lt;byte[],byte[]&gt;&gt;&nbsp;createProducerRecords(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn,
                                                                                                                  <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)
                                                                                                           throws com.datamirror.ts.target.publication.userexit.UserExitException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#createProducerRecords-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">KafkaCustomOperationProcessorIF</a></code></span></div>
<div class="block">This method returns zero or more new Kafka ProducerRecord 's in response to an event on the source database described by the kafkaKcopOperationIn
 parameter.<BR><BR>
 
 This method can be called by multiple threads concurrently and thus events are potentially processed in a differing order than they occurred on the
 source database.  Ultimately the records resulting from calls to this method will be written to the Kafka cluster in order at a 
 topic/partition granularity for the replication session. This is guaranteed regardless of which thread processes a given source replication event.<BR><BR>
 
 It is required for the user to ensure they create a new ProducerRecord for each added to the list.  To attempt to reuse an old ProducerRecord might
  result in the values of previously processed/formatted changing and thus being incorrect.  See the Sample KCOPs for an example.<BR><BR>
  
 Care must be taken with Non-thread safe objects.  The KCOP KcoppDefaultBehaviorSample shows how to have each thread create its own non-threadsafe
 objects and store their specific instances of them with the setKcopThreadSpecificContext() method available from the passed in KafkaKcopReplicationCoordinatorIF.<BR> <BR>
 
 It is acceptable for the returned ArrayList to be null, which indicates no ProducerRecords are to be written to Kafka on behalf of this replication event.<BR><BR>
 
  Kafka Producer records returned in the ArrayList which refer to the same Kafka topic/partition are written in list order to the Kafka topic.<BR></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#createProducerRecords-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">createProducerRecords</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaCustomOperationProcessorIF</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>createProducerRecords</code>&nbsp;in class&nbsp;<code>com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractKcop</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaKcopOperationIn</code> - - Contains information relevant to the current event/operation being processed.</dd>
<dd><code>kafkaKcopCoordinator</code> - - Contains subscription scope information including functionality for storage of each thread's non-threadsafe objects.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>- A list of Kafka ProducerRecords to be written to the Kafka cluster.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.datamirror.ts.target.publication.userexit.UserExitException</code> - can be thrown</dd>
</dl>
</li>
</ul>
<a name="changeNameSpaceIfNecessary-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeNameSpaceIfNecessary</h4>
<pre>public&nbsp;org.apache.avro.Schema&nbsp;changeNameSpaceIfNecessary(org.apache.avro.Schema&nbsp;beforeSchema)</pre>
</li>
</ul>
<a name="createKafkaAuditAvroBinaryProducerRecord-org.apache.avro.generic.GenericRecord-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-com.datamirror.ts.target.publication.userexit.sample.kafka.ThreadSpecificContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createKafkaAuditAvroBinaryProducerRecord</h4>
<pre>public&nbsp;org.apache.kafka.clients.producer.ProducerRecord&lt;byte[],byte[]&gt;&nbsp;createKafkaAuditAvroBinaryProducerRecord(org.apache.avro.generic.GenericRecord&nbsp;kafkaAvroValueAuditRecord,
                                                                                                                <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopReplicationCoordinator,
                                                                                                                <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn,
                                                                                                                com.datamirror.ts.target.publication.userexit.sample.kafka.ThreadSpecificContext&lt;com.datamirror.ts.target.publication.userexit.sample.kafka.AvroAuditKcopSpecificContext&gt;&nbsp;threadSpecificContext)</pre>
<div class="block">Serialize the generic avro record using the Confluent serializer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaAvroValueAuditRecord</code> - </dd>
<dd><code>kafkaKcopOperationIn</code> - </dd>
<dd><code>threadSpecificContext</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ProducerRecord</dd>
</dl>
</li>
</ul>
<a name="createKafkaAuditAvroRecord-org.apache.avro.Schema-org.apache.avro.generic.GenericRecord-org.apache.avro.Schema-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopOperationInIF-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createKafkaAuditAvroRecord</h4>
<pre>public&nbsp;org.apache.avro.generic.GenericData.Record&nbsp;createKafkaAuditAvroRecord(org.apache.avro.Schema&nbsp;beforeSchema,
                                                                             org.apache.avro.generic.GenericRecord&nbsp;beforeRecord,
                                                                             org.apache.avro.Schema&nbsp;kafkaAuditAvroSchema,
                                                                             <a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopOperationInIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopOperationInIF</a>&nbsp;kafkaKcopOperationIn)
                                                                      throws com.datamirror.ts.target.publication.userexit.UserExitException</pre>
<div class="block">Creates a new Avro Generic Record that combines the original record for the source and 
 the selected journal control fields.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaAuditAvroSchema</code> - schema</dd>
<dd><code>KafkaKcopOperationInIF</code> - contains before and after values and other information about the operation.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>generic avro record containing journal control fields</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.datamirror.ts.target.publication.userexit.UserExitException</code></dd>
</dl>
</li>
</ul>
<a name="generateAfterSchema-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateAfterSchema</h4>
<pre>public&nbsp;org.apache.avro.Schema&nbsp;generateAfterSchema(org.apache.avro.Schema&nbsp;beforeSchema)</pre>
<div class="block">Generate an after schema using the before Schema.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>avroBaseSchema</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="generateBeforeSchema-org.apache.avro.Schema-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateBeforeSchema</h4>
<pre>public&nbsp;org.apache.avro.Schema&nbsp;generateBeforeSchema(org.apache.avro.Schema&nbsp;avroBaseSchema)</pre>
<div class="block">Generate an before schema with nullable columns for LOB columns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>avroBaseSchema</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="generateKafkaAuditValueSchema-org.apache.avro.Schema-org.apache.avro.Schema-com.datamirror.ts.target.publication.userexit.ReplicationEventPublisherIF-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateKafkaAuditValueSchema</h4>
<pre>public&nbsp;org.apache.avro.Schema&nbsp;generateKafkaAuditValueSchema(org.apache.avro.Schema&nbsp;avroValueSchemaIn,
                                                            org.apache.avro.Schema&nbsp;avroBeforeValueSchemaIn,
                                                            com.datamirror.ts.target.publication.userexit.ReplicationEventPublisherIF&nbsp;kafkaKcopCoordinator)</pre>
<div class="block">Create a new schema for the audit record. This schema is used when creating the new generic avro record.
 
 The journal control fields are guaranteed to return non-null values. 
 
 Create a new list of fields for the new schema by taking fields from the previous schema and add 
 to new schema, then create new fields for the audit record. Create a new schema with the new 
 fields list and other parameters from the old schema.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaKcopCoordinator</code> - </dd>
<dd><code>avroValueSchemaIn</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>schema</dd>
</dl>
</li>
</ul>
<a name="tracksJcfs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tracksJcfs</h4>
<pre>public&nbsp;boolean&nbsp;tracksJcfs()</pre>
</li>
</ul>
<a name="finish-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finish</h4>
<pre>public&nbsp;void&nbsp;finish(<a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaKcopReplicationCoordinatorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaKcopReplicationCoordinatorIF</a>&nbsp;kafkaKcopCoordinator)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#finish-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">KafkaCustomOperationProcessorIF</a></code></span></div>
<div class="block">This method will be called during shutdown.  It will only be called once the last encodeAvroRecord method call has been made and resultant
 records are confirmed to have been written to Kafka. After being called, no further calls to encodeAvroRecord will be made for this session of replication.
 Finish will be called once for the user exit.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html#finish-com.datamirror.ts.target.publication.userexit.kafka.KafkaKcopReplicationCoordinatorIF-">finish</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/kafka/KafkaCustomOperationProcessorIF.html" title="interface in com.datamirror.ts.target.publication.userexit.kafka">KafkaCustomOperationProcessorIF</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>finish</code>&nbsp;in class&nbsp;<code>com.datamirror.ts.target.publication.userexit.sample.kafka.AbstractKcop</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kafkaKcopCoordinator</code> - TODO</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div role="navigation" title ="Bottom_NAVIGATION" aria-label ="Bottom Navigation Bar"/>
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KcopSingleRowAvroAuditHeadersIntegrated.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopMultiRowAvroLiveAuditIntegrated.html" title="class in com.datamirror.ts.target.publication.userexit.sample.kafka"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditIntegrated.html" title="class in com.datamirror.ts.target.publication.userexit.sample.kafka"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?com/datamirror/ts/target/publication/userexit/sample/kafka/KcopSingleRowAvroAuditHeadersIntegrated.html" target="_top">Frames</a></li>
<li><a href="KcopSingleRowAvroAuditHeadersIntegrated.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<div role="contentinfo" title ="contentinfo_title" aria-label ="Contains footer note"/>
<p class="legalCopy"><small><i>Licensed Materials - Property of IBM &copy; Copyright IBM Corp. 1994, 2015</i></small></p>
</body>
</html>
